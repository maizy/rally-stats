<!doctype html>
<html lang="{{.lang}}" class="h-100">

{{ template "head" . }}

<body class="h-100">
{{ template "header" . }}

<main>
  {{range $locationAndTracks := .tracksByLocation}}
    <div class="container">
      <h2 class="mt-5 mb-2 text-secondary">{{$locationAndTracks.Location.Name}}</h2>

      {{range $trackAndCarClasses := $locationAndTracks.TracksAndCarClasses}}
        <h3 class="mt-3">
          {{$trackAndCarClasses.Track.Name}}
          <div class="badge fs-6 bg-light text-dark">
              {{formatLength $trackAndCarClasses.Track.Length}}&thinsp;km
          </div>
        </h3>
        {{ if $trackAndCarClasses.CarClasses }}
          <table class="table">
            <thead>
              <tr>
                <th>Class</th>
                <th>Stage times</th>
                <th>Best time</th>
              </tr>
            </thead>
            <tbody>
              {{range $carClass := $trackAndCarClasses.CarClasses}}
                <tr>
                  <td>{{$carClass.CarClass.Name}}</td>
                  <td>{{$carClass.TotalStageTimes}}</td>
                  <td>{{formatRallyTime $carClass.BestStageTime}}</td>
                </tr>
              {{end}}
            </tbody>
          </table>
        {{ else }}
          <p>&mdash;</p>
        {{ end }}
      {{end}}
    </div>
  {{end}}

</main>

{{ template "footer" . }}
</body>
</html>
