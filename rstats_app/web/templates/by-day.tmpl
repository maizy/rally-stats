<!doctype html>
<html lang="{{.lang}}" class="h-100">

{{ template "head" . }}

<body class="d-flex flex-column h-100">
{{ template "header" . }}

<main class="container flex-shrink-0">
  <div class="container">
    <p class="text-end"><span class="badge bg-secondary">Total Laptimes: {{ .totalLaptimes }}</span></p>
  </div>

  <div class="container">
  {{range $byDay := .byDays}}
    <div class="mt-5 mb-3">
      <h2>{{$byDay.Day.Format "Jan 02, 2006"}}</h2>
    </div>

    <table class="table" style="table-layout: fixed">
      <tbody>
      {{range $lapTime := $byDay.LapTimes }}
        <tr>
          <td class="text-nowrap text-center align-bottom time-width">{{$lapTime.StartedAtTimeFormatted}}</td>
          <td class="fs-4 text-nowrap text-center align-bottom laptime-width">{{formatRallyTime $lapTime.Time}}</td>
          <td style="width: auto;">
            <div class="fs-5">{{$lapTime.Track.Name}}</div>
            <div class="text-secondary">{{$lapTime.Track.Location}} <span class="ms-lg-3">{{formatLength $lapTime.Track.Length}}&thinsp;km</span></div>
          </td>
          <td style="width: auto;">
            <div class="fs-5">{{$lapTime.Car.Name}}</div>
            <div class="text-secondary">{{$lapTime.Car.Class.Name}} <span class="ms-lg-3">{{$lapTime.Car.Class.Drivetrain}}</span></div>
          </td>
        </tr>
      {{end}}
      </tbody>
      <tfoot>
        <tr class="table-light fst-italic">
          <td class="text-nowrap text-center align-bottom time-width">total</td>
          <td class="fs-4 text-nowrap text-center align-bottom laptime-width">
              {{formatRallyTime $byDay.TotalTime}}
          </td>
          <td style="width: auto;" class="fs-4">
            {{formatLength $byDay.TotalLength}}&thinsp;km
          </td>
          <td style="width: auto;"></td>
        </tr>
      </tfoot>
    </table>
  {{end}}
  </div>
</main>

{{ template "footer" . }}
</body>
</html>
